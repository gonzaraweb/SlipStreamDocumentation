<?xml version="1.0" encoding="UTF-8"?>
<chapter version="5.0" xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:svg="http://www.w3.org/2000/svg"
         xmlns:m="http://www.w3.org/1998/Math/MathML"
         xmlns:html="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">
  <title>Separate Worker</title>

  <section>
    <title>Introduction</title>

    <para>As a first step towards the final configuration, we will run a
    worker on one node and a combined server and client on a second node. This
    will allow us to start dealing with synchronization issues between the
    machines. This is a common problem when bringing up and then testing
    n-tier systems.</para>
  </section>

  <section>
    <title>Worker Configuration</title>

    <para>Essentially the execute and report scripts simply take the
    worker-related parts from the monolithic configuration. The execute script
    is the following:</para>

    <programlisting>TODO</programlisting>

    <para>The reports script is the following:</para>

    <programlisting>TODO</programlisting>

    <para>The only change in the configuration is to make sure that the server
    name is used to configuration the pbs_mom service. This is done by
    explicitly providing the server in the property name. </para>
  </section>

  <section>
    <title>Server and Client Configuration</title>

    <para>Again the scripts look very similar to those for the monolithic
    configuration, except with the worker configuration removed. The execute
    script is:</para>

    <programlisting>TODO</programlisting>

    <para>and the reports script is:</para>

    <programlisting>TODO</programlisting>

    <para>The primary difference is that we must identify the worker node to
    include in the Torque nodes file. This is again done with an explicit
    reference to the worker machine.</para>
  </section>

  <section>
    <title>Deployment</title>

    <para>The deployment will now consist of two machines. This is the first
    multi-machine deployment and shows that cross-machine synchronization can
    be used to ensure that the ensemble is in the proper state.</para>
  </section>
</chapter>
